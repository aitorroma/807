<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pantalla de Login</title>
</head>
<body style="margin: 0; padding: 0; height: 100vh; display: flex; justify-content: center; align-items: center; background-color: #f0f0f0;">

<!-- Contenedor para ingresar contraseña -->
<div id="loginOverlay" class="overlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 1); display: flex; justify-content: center; align-items: center; z-index: 100;">
  <div class="loginPopup" style="background: #fff; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);">
    <h2 style="margin-top: 0;">Ingreso Requerido</h2>
    <p>Por favor, ingresa la contraseña para acceder.</p>
    <input type="password" id="password" placeholder="Contraseña" style="padding: 10px; margin-bottom: 10px; width: 100%; box-sizing: border-box;">
    <button id="loginButton" style="display: block; width: 100%; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Ingresar</button>
    <p id="errorMessage" style="color: red; display: none;">Contraseña incorrecta. Intenta nuevamente.</p>
  </div>
</div>

<!-- Contenido principal oculto inicialmente -->
<div id="content" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); display: flex; justify-content: center; align-items: center;">
  <div id="categoriesContainer" style="display: grid; grid-template-columns: 1fr; gap: 20px; width: 100%; height: 100%; padding: 20px; box-sizing: border-box;">
    <!-- Los números rotativos se mostrarán aquí -->
  </div>
</div>

<!-- Contenedor para el mensaje de permiso de sonido -->
<div id="soundPermissionOverlay" class="overlay" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.7); z-index: 101; display: flex; justify-content: center; align-items: center;">
  <div class="soundPermissionPopup" style="background: #fff; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); text-align: center;">
    <h2 style="margin-top: 0;">Permisos de Sonido</h2>
    <p>Activa un sonido de alerta para indicar que se actualizó el número a facilitar</p>
    <button id="aceptarSonido" style="margin-top: 20px; padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Aceptar</button>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const loginButton = document.getElementById('loginButton');
  const passwordInput = document.getElementById('password');
  const errorMessage = document.getElementById('errorMessage');
  const loginOverlay = document.getElementById('loginOverlay');
  const content = document.getElementById('content');
  const soundPermissionOverlay = document.getElementById('soundPermissionOverlay');
  
const numeros = [
  '807 475 050',
  '807 475 051',
  '807 475 052',
  '807 475 053',
  '807 475 054',
  '807 475 055',
  '807 475 056',
  '807 475 057',
  '807 475 058',
  '807 475 059',

  '807 475 060',
  '807 475 061',
  '807 475 062',
  '807 475 063',
  '807 475 064',
  '807 475 065',
  '807 475 066',
  '807 475 067',
  '807 475 068',
  '807 475 069',

  '807 475 260',
  '807 475 261',
  '807 475 262',
  '807 475 263',
  '807 475 264',
  '807 475 265',
  '807 475 266',
  '807 475 267',
  '807 475 268',
  '807 475 269',

  '807 475 270',
  '807 475 271',
  '807 475 272',
  '807 475 273',
  '807 475 274',
  '807 475 275',
  '807 475 276',
  '807 475 277',
  '807 475 278',
  '807 475 279',

  '807 475 470',
  '807 475 471',
  '807 475 472',
  '807 475 473',
  '807 475 474',
  '807 475 475',
  '807 475 476',
  '807 475 477',
  '807 475 478',
  '807 475 479'
];
  let currentIndex = 0;

  loginButton.addEventListener('click', function() {
    const password = passwordInput.value;
    if (password === 'ring807') {
      loginOverlay.style.display = 'none';
      content.style.display = 'flex';
      soundPermissionOverlay.style.display = 'flex';
    } else {
      errorMessage.style.display = 'block';
    }
  });

  const aceptarSonidoButton = document.getElementById('aceptarSonido');
  aceptarSonidoButton.addEventListener('click', function() {
    soundPermissionOverlay.style.display = 'none';
    mostrarNumeroFijo();
    setInterval(rotarNumeroAleatorio, 180000); // cada 3 minutos
  });

  function mostrarNumeroFijo() {
    const numeroAleatorio = numeros[Math.floor(Math.random() * numeros.length)];
    const numeroContainer = document.createElement('div');
    numeroContainer.style.display = 'flex';
    numeroContainer.style.flexDirection = 'column';
    numeroContainer.style.alignItems = 'center';
    numeroContainer.style.justifyContent = 'center';
    numeroContainer.style.background = 'rgba(255, 255, 255, 0.2)';
    numeroContainer.style.borderRadius = '10px';
    numeroContainer.style.padding = '20px';
    numeroContainer.style.width = '100%';
    numeroContainer.style.height = '100%';

    const numeroTitle = document.createElement('h1');
    numeroTitle.style.color = 'white';
    numeroTitle.textContent = numeroAleatorio;
    numeroContainer.appendChild(numeroTitle);

    const categoriesContainer = document.getElementById('categoriesContainer');
    categoriesContainer.innerHTML = '';
    categoriesContainer.appendChild(numeroContainer);

    reproducirSonido("https://weareat.work/mixkit-flute-cell-phone-alert-2315.wav");
  }

  function rotarNumeroAleatorio() {
    mostrarNumeroFijo();
  }

  function reproducirSonido(url) {
    const sonido = new Audio(url);
    sonido.play().catch(error => console.error("Error al reproducir el sonido:", error));
  }
});
</script>

</body>
</html>
